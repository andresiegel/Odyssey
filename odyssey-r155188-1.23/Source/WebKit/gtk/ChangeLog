2013-09-10  Zan Dobersek  <zdobersek@igalia.com>

        [GTK] Add support for the Wayland build target
        https://bugs.webkit.org/show_bug.cgi?id=120627

        Reviewed by Gustavo Noronha Silva.

        * WebCoreSupport/ChromeClientGtk.cpp:
        (WebKit::createBackingStore): Additionally guard the <gdk/gdkx.h> inclusion and the inclusion and use of
        WidgetBackingStoreGtkX11 with PLATFORM(X11), ensuring this code is built when also building with X11 target
        enabled. GDK_WINDOWING_X11 macro can be defined even if the X11 target is disabled.

2013-09-02  Brian Holt  <brian.holt@samsung.com>

        [ATK] Leak: Leaks in testatk.c
        https://bugs.webkit.org/show_bug.cgi?id=118675

        Reviewed by Mario Sanchez Prada.

        Fixed memory leaks by matching ref calls with unrefs.

        * tests/testatk.c:
        (testWebkitAtkCaretOffsets):
        (testWebkitAtkCaretOffsetsAndExtranousWhiteSpaces):
        (testWebkitAtkGetTextAtOffset):
        (testWebkitAtkGetTextAtOffsetNewlines):
        (testWebkitAtkGetTextAtOffsetTextarea):
        (testWebkitAtkGetTextAtOffsetTextInput):
        (testWebkitAtkGetTextInParagraphAndBodySimple):
        (testWebkitAtkGetTextInParagraphAndBodyModerate):
        (testWebkitAtkTextAttributes):
        (testWebkitAtkTextSelections):
        (testWebkitAtkListsOfItems):

2013-08-29  Zan Dobersek  <zdobersek@igalia.com>

        [Automake] libWebCoreDOM.la could use a better name
        https://bugs.webkit.org/show_bug.cgi?id=120232

        Reviewed by Martin Robinson.

        * GNUmakefile.am: libWebCoreDOM has a new name - libGObjectDOMBindings.

2013-08-29  Arnaud Renevier  <a.renevier@samsung.com>

        [cairo] canvas drawing on itself doesn't work with accelerated canvas
        https://bugs.webkit.org/show_bug.cgi?id=118808

        Reviewed by Martin Robinson.

        Change cairoImageSurfaceToGdkPixbuf to cairoSurfaceToGdkPixbuf.

        * webkit/webkitfavicondatabase.cpp:
        (getIconPixbufSynchronously):

2013-08-26  Zan Dobersek  <zdobersek@igalia.com>

        Unreviewed GTK build fix.

        * WebCoreSupport/FrameLoaderClientGtk.cpp:
        (WebKit::FrameLoaderClient::FrameLoaderClient): Remove an assertion that was not removed in r154658.

2013-08-26  Ryosuke Niwa  <rniwa@webkit.org>

        Another GTK+ build fix.

        * WebCoreSupport/FrameLoaderClientGtk.cpp:

2013-08-26  Ryosuke Niwa  <rniwa@webkit.org>

        GTK+ build fix. Like r154620.

        * webkit/webkitwebframe.cpp:
        (webkit_web_frame_new):

2013-08-26  Pratik Solanki  <psolanki@apple.com>

        PageGroup::groupSettings() should return a reference
        https://bugs.webkit.org/show_bug.cgi?id=120319

        Reviewed by Andreas Kling.

        PageGroup::m_groupSettings is never NULL so we can just return a reference from groupSettings().

        * webkit/webkitwebdatabase.cpp:
        (webkit_set_web_database_directory_path):

2013-08-26  Andreas Kling  <akling@apple.com>

        WebCore: Let Page create the main Frame.
        <https://webkit.org/b/119964>

        Tweak WebKit1/GTK for changes in WebCore.

        Patch by Zan Dobersek <zdobersek@igalia.com>
        Reviewed by Gustavo Noronha Silva.

        * WebCoreSupport/FrameLoaderClientGtk.h:
        (WebKit::FrameLoaderClient::setWebFrame):
        * webkit/webkitwebframe.cpp:
        (webkit_web_frame_new):
        * webkit/webkitwebview.cpp:
        (webkit_web_view_init):

2013-08-24  Darin Adler  <darin@apple.com>

        Frame::tree should return a reference instead of a pointer
        https://bugs.webkit.org/show_bug.cgi?id=120259

        Reviewed by Andreas Kling.

        * WebCoreSupport/DumpRenderTreeSupportGtk.cpp:
        (DumpRenderTreeSupportGtk::getFrameChildren):
        (DumpRenderTreeSupportGtk::clearMainFrameName):
        * WebCoreSupport/FrameLoaderClientGtk.cpp:
        (WebKit::FrameLoaderClient::createFrame):
        * webkit/webkitwebframe.cpp:
        (webkit_web_frame_get_name):
        (webkit_web_frame_get_parent):
        (webkit_web_frame_find_frame):
        * webkit/webkitwebview.cpp:
        (webkit_web_view_set_highlight_text_matches):
        Use tree(). instead of tree()->.

2013-08-21  Zan Dobersek  <zdobersek@igalia.com>

        <https://webkit.org/b/119836> [GTK] ChromeClient::paint is susceptible to system time changes

        Reviewed by Martin Robinson.

        Instead of using WTF::currentTime() as the value of the last display occurrence,
        WTF::monotonicallyIncreasingTime() should be used. The latter is not affected by
        the changes is the system's time, which can cause a halt in the display updating.

        * WebCoreSupport/ChromeClientGtk.cpp:
        (WebKit::ChromeClient::paint):

2013-08-19  Pratik Solanki  <psolanki@apple.com>

        <https://webkit.org/b/119918> Frame::selection() should return a reference

        Reviewed by Darin Adler.

        m_selection is never NULL so return a reference from Frame::selection(). Also removed some
        unnecessary null checks and assert diff ts exposed as a result.

        * WebCoreSupport/ChromeClientGtk.cpp:
        (WebKit::ChromeClient::paint):
        * WebCoreSupport/DumpRenderTreeSupportGtk.cpp:
        (DumpRenderTreeSupportGtk::firstRectForCharacterRange):
        (DumpRenderTreeSupportGtk::selectedRange):
        (DumpRenderTreeSupportGtk::rectangleForSelection):
        * WebCoreSupport/EditorClientGtk.cpp:
        (WebKit::collapseSelection):
        (WebKit::setSelectionPrimaryClipboardIfNeeded):
        * webkit/webkitwebframe.cpp:
        (webkit_web_frame_get_range_for_word_around_caret):
        * webkit/webkitwebview.cpp:
        (getLocationForKeyboardGeneratedContextMenu):

2013-08-17  Darin Adler  <darin@apple.com>

        <https://webkit.org/b/119941> Make Page::dragController return a reference

        Reviewed by Andreas Kling.

        * webkit/webkitwebview.cpp:
        (dragExitedCallback):
        (webkit_web_view_drag_motion):
        (webkit_web_view_drag_data_received):
        (webkit_web_view_drag_drop):
        Updated call sites.

2013-08-16  Pratik Solanki  <psolanki@apple.com>

        <https://webkit.org/b/119852> Frame::scriptController() should return a reference

        Reviewed by Andreas Kling.

        m_script is never NULL so we can just return a reference. Also remove some pointless null
        checks as a result of doing this.

        * WebCoreSupport/FrameLoaderClientGtk.cpp:
        (WebKit::FrameLoaderClient::dispatchDidClearWindowObjectInWorld):
        * webkit/webkitwebframe.cpp:
        (webkit_web_frame_get_global_context):
        * webkit/webkitwebview.cpp:
        (webkit_web_view_execute_script):

2013-08-15  Zan Dobersek  <zdobersek@igalia.com>

        Unreviewed GTK build fix for debug configurations.

        * webkit/webkitwebframe.cpp:
        (WebKit::kit): Remove the bogus assertion for Frame::loader() that now returns a reference.

2013-08-15  Anders Carlsson  <andersca@apple.com>

        <https://webkit.org/b/119859> Frame::loader() should return a reference

        Reviewed by Andreas Kling.

        * WebCoreSupport/DumpRenderTreeSupportGtk.cpp:
        (DumpRenderTreeSupportGtk::clearOpener):
        (DumpRenderTreeSupportGtk::shouldClose):
        * WebCoreSupport/FrameLoaderClientGtk.cpp:
        (WebKit::FrameLoaderClient::dispatchWillSubmitForm):
        (WebKit::FrameLoaderClient::committedLoad):
        (WebKit::FrameLoaderClient::dispatchDecidePolicyForResponse):
        (WebKit::FrameLoaderClient::dispatchDecidePolicyForNewWindowAction):
        (WebKit::FrameLoaderClient::dispatchDecidePolicyForNavigationAction):
        (WebKit::FrameLoaderClient::createFrame):
        (WebKit::FrameLoaderClient::dispatchDidCommitLoad):
        * webkit/webkitwebframe.cpp:
        (webkit_web_frame_finalize):
        (webkit_web_frame_load_uri):
        (webkit_web_frame_load_data):
        (webkit_web_frame_load_request):
        (webkit_web_frame_stop_loading):
        (webkit_web_frame_reload):
        (webkit_web_frame_get_data_source):
        (webkit_web_frame_get_provisional_data_source):
        (webkit_web_frame_get_response_mime_type):
        (webkit_web_frame_get_network_response):
        (WebKit::kit):
        * webkit/webkitwebpolicydecision.cpp:
        (webkit_web_policy_decision_use):
        (webkit_web_policy_decision_ignore):
        (webkit_web_policy_decision_download):
        * webkit/webkitwebview.cpp:
        (webkit_web_view_dispose):
        (webkit_web_view_reload):
        (webkit_web_view_reload_bypass_cache):
        (webkit_web_view_stop_loading):
        (webkit_web_view_can_show_mime_type):
        (webkit_web_view_set_custom_encoding):
        (webkit_web_view_get_custom_encoding):
        (webkit_web_view_get_subresources):

2013-08-15  Simon Pena  <simon.pena@samsung.com>

        <https://webkit.org/b/119584> [Gtk] URL printing code in DumpRenderTree doesn't match WTR or Mac DRT

        Reviewed by Gustavo Noronha Silva.

        Following a similar approach as in r153977, return a path string
        that is relative to main frame URL or just file name if the
        resource is not in the same directory subtree, and replace empty
        strings with "(null)".

        Update the AuthenticationCallback used in DumpRenderTree so that
        it receives a WebKitWebResource, and update
        dispatchDidReceiveAuthenticationChallenge so that it retrieves the
        WebKitWebResource and passes it to the callback.

        * WebCoreSupport/DumpRenderTreeSupportGtk.h: Update the
        AuthenticationCallback adding a WebKitWebResource parameter.
        * WebCoreSupport/FrameLoaderClientGtk.cpp:
        (WebKit::toString): Define this function earlier so we can use it
        to get the WebKitWebResource from the identifier in the
        AuthenticationChallenge.
        (WebKit::FrameLoaderClient::dispatchDidReceiveAuthenticationChallenge):
        Use toString to retrieve a WebKitWebResource from the identifier
        in the authentication challenge, and pass that WebKitWebResource
        to the AuthenticationCallback.

2013-08-13  Xabier Rodriguez Calvar  <calvaris@igalia.com>

        [GTK] WK does not link properly against libxslt
        https://bugs.webkit.org/show_bug.cgi?id=119688

        Reviewed by Gustavo Noronha Silva.

        * GNUmakefile.am: Added LIBXSLT_LIBS to the unit tests.

2013-08-13  Alberto Garcia  <berto@igalia.com>

        [GTK] Closing inspector window crashes wk
        https://bugs.webkit.org/show_bug.cgi?id=110865

        Reviewed by Carlos Garcia Campos.

        The previous fix for the inspector window crash breaks some unit
        tests. This one goes back to the original code and only moves the
        actual deletion of priv->corePage to the end of the function.

        * webkit/webkitwebview.cpp:
        (webkit_web_view_dispose):

2013-08-13  Alberto Garcia  <berto@igalia.com>

        [GTK] Closing inspector window crashes wk
        https://bugs.webkit.org/show_bug.cgi?id=110865

        Reviewed by Carlos Garcia Campos.

        Deleting priv->corePage during the destruction of a webView will
        trigger the deletion of InspectorFrontendClient. However that
        object is supposed to handle the webView's destroy signal first in
        order to do the necessary cleanup.

        The solution is to wait until webkit_web_view_dispose finishes
        before deleting priv->corePage.

        * webkit/webkitwebview.cpp:
        (webkit_web_view_dispose):

2013-08-12  Anton Obzhirov  <a.obzhirov@samsung.com>

        [GTK] Don't load GAIL when using GTK 3.2 or greater
        https://bugs.webkit.org/show_bug.cgi?id=72735

        Reviewed by Carlos Garcia Campos.

        * tests/testatk.c:
        (initializeTestingFramework):
        (main):

2013-08-11  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed. Update NEWS and Versions.m4 for 2.1.4 release.

        * NEWS: Update release notes.

2013-08-09  Alexey Proskuryakov  <ap@apple.com>

        REGRESSION (r142755): window.open creates an invisible window when width and height are 0
        https://bugs.webkit.org/show_bug.cgi?id=119633

        Reviewed by Darin Adler.

        * WebCoreSupport/ChromeClientGtk.cpp: (WebKit::ChromeClient::setWindowRect):
        Once again, the passed rect cannot be empty.

2013-07-27  Mark Rowe  <mrowe@apple.com>

        Logging should be configurable using human-readable channel names rather than crazy bitmasks
        <http://webkit.org/b/119031>

        Implement shared logic for initializing logging channels based on human-readable channel names in WTF,
        and rework the WebCore, WebKit and WebKit2 logging initialization on top of it.

        Logging channels may now be enabled by providing a comma-separated list of channel names, with the special
        "all" name enabling all channels. Channel names prefixed with a leading "-" will result in the named channel
        being disabled. For instance, specifying "all,-history,-loading" will result in all logging channels except
        for history and loading being enabled.

        For OS X developers, this also changes the name of the user defaults used to enable logging. This is done to allow
        the old user defaults to remain set for those people that need to switch between version of WebKit before and
        after this change. Where the old user default keys were WebCoreLogLevel, WebKitLogLevel and WebKit2LogLevel,
        the new user default keys are WebCoreLogging, WebKitLogging and WebKit2Logging.

        For GTK developers, this changes the separator used in the WEBKIT_DEBUG environment variable to a comma for
        consistency with the other platforms and to enable more code sharing.

        While doing this work I've also taken the opportunity to eliminate the need to touch multiple files when
        adding a new logging channel. Now only the header in the relevant project needs to be updated.

        Reviewed by Sam Weinig.

        * webkit/webkitglobals.cpp: Switch from WebCore's InitializeLogging.h to Logging.h.

2013-08-02  Mario Sanchez Prada  <mario.prada@samsung.com>

        Implement atk_text_get_text_*_offset for WORD
        https://bugs.webkit.org/show_bug.cgi?id=114871

        Reviewed by Martin Robinson.

        Updated current unit tests and add a new one specific for embedded
        objects, to ensure we are covering even more cases than before.

        * tests/testatk.c:
        (testWebkitAtkGetTextAtOffsetWithEmbeddedObjects): New.
        (main): Added new test to the test suite.

2013-07-30  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed. Update NEWS and Versions.m4 for 2.1.4 release.

        * NEWS: Added release notes for 2.1.4.

2013-07-29  Mario Sanchez Prada  <mario.prada@samsung.com>

        [ATK] Issues with edge cases when getting offsets for a text range in AtkText
        https://bugs.webkit.org/show_bug.cgi?id=118908

        Reviewed by Martin Robinson.

        * tests/testatk.c:
        (runGetTextTests): Updated unit tests to check more cases of
        calling the atk_text_get_text_*_offset() functions for WORD.

2013-07-25  Andreas Kling  <akling@apple.com>

        ChromeClient::focusedNodeChanged() should be focusedElementChanged().
        <http://webkit.org/b/119110>

        Reviewed by Anders Carlsson.

        * WebCoreSupport/ChromeClientGtk.cpp:
        (WebKit::ChromeClient::focusedElementChanged):
        * WebCoreSupport/ChromeClientGtk.h:

2013-07-23  Carlos Garcia Campos  <cgarcia@igalia.com>

        [GTK] GtkAdjustmentWatcher idle source not correctly handled
        https://bugs.webkit.org/show_bug.cgi?id=119003

        Reviewed by Martin Robinson.

        GtkAdjustmentWatcher::updateAdjustmentsFromScrollbarsLater()
        creates a new idle source and initializes
        m_updateAdjustmentCallbackId, which is used everywhere and
        specially in the destructor to cancel the source when the
        GtkAdjustmentWatcher is deleted. However,
        m_updateAdjustmentCallbackId is reset to 0 in
        GtkAdjustmentWatcher::updateAdjustmentsFromScrollbars() only when
        not returning early. This method is public and not only called by
        the updateAdjustmentCallback, which means that a call to
        updateAdjustmentsFromScrollbars could reset the
        m_updateAdjustmentCallbackId without actually destroying the source.

        * WebCoreSupport/GtkAdjustmentWatcher.cpp:
        (WebKit::GtkAdjustmentWatcher::updateAdjustmentsFromScrollbars):
        Cancel the adjustment later idle if it has been scheduled.
        (WebKit::GtkAdjustmentWatcher::updateAdjustmentCallback): Reset
        m_updateAdjustmentCallbackId.
        * WebCoreSupport/GtkAdjustmentWatcher.h:

2013-07-17  Kangil Han  <kangil.han@samsung.com>

        Use toHTMLMediaElement
        https://bugs.webkit.org/show_bug.cgi?id=118727

        Reviewed by Ryosuke Niwa.

        To avoid direct use of static_cast, this patch uses toHTMLMediaElement for code cleanup.

        * WebCoreSupport/ChromeClientGtk.cpp:
        (WebKit::ChromeClient::enterFullscreenForNode):
        (WebKit::ChromeClient::exitFullscreenForNode):
        (WebKit::ChromeClient::enterFullScreenForElement):
        (WebKit::ChromeClient::exitFullScreenForElement):

2013-07-09  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed. Update NEWS and Versions.m4 for 2.1.3 release.

        * NEWS: Added release notes for 2.1.3.

2013-07-08  Carlos Garcia Campos  <cgarcia@igalia.com>

        [GTK] webkit_set_cache_model is not turning the cache off
        https://bugs.webkit.org/show_bug.cgi?id=118345

        Reviewed by Gustavo Noronha Silva.

        Our documentation says that WEBKIT_CACHE_MODEL_DOCUMENT_VIEWER
        disables the cache completely, but we are only setting the cache
        capacities to 0. Cache capacities are not checked when resources
        are added to the cache, but when it's pruned. To disable the cache
        we need to call MemoryCache::setDisabled explicitly.

        * webkit/webkitglobals.cpp:
        (webkit_set_cache_model): Disable the cache when min dead, max
        dead and total capacities are all set to 0.

2013-07-08  Brian Holt  <brian.holt@samsung.com>

        [GTK] FrameLoaderClient: Refactor naked pointers to use smart pointers
        https://bugs.webkit.org/show_bug.cgi?id=118417

        Reviewed by Carlos Garcia Campos.

        Use GOwnPtr and GRefPtr where possible.

        * WebCoreSupport/FrameLoaderClientGtk.cpp:
        (WebKit::FrameLoaderClient::dispatchDidFailLoad):

2013-07-04  Mario Sanchez Prada  <mario.prada@samsung.com>

        [ATK] Do not expose '\n' for wrapped lines with ATK_TEXT_BOUNDARY_CHAR
        https://bugs.webkit.org/show_bug.cgi?id=118359

        Reviewed by Carlos Garcia Campos.

        Added new unit test to make sure we exposed line breaks properly.

        * tests/testatk.c:
        (testWebkitAtkGetTextAtOffsetWithWrappedLines): New unit test.
        (main): Added new test to the test suite.

2013-07-01  Gustavo Noronha Silva  <gustavo.noronha@collabora.com>

        [GTK] Remove unsupported AC backends
        https://bugs.webkit.org/show_bug.cgi?id=117362

        Reviewed by Martin Robinson.

        * GNUmakefile.am:
        * WebCoreSupport/AcceleratedCompositingContext.h: removed clutter and cairo
        additions.
        * WebCoreSupport/AcceleratedCompositingContextCairo.cpp: Removed.
        * WebCoreSupport/AcceleratedCompositingContextClutter.cpp: Removed.
        * webkit/webkitglobals.cpp:
        (webkitInit): removed clutter-gtk initialization.

2013-07-01  ChangSeok Oh  <changseok.oh@collabora.com>

        [GTK] Use PassOwnPtr for the returned value of createBackingStore
        https://bugs.webkit.org/show_bug.cgi?id=118230

        Reviewed by Andreas Kling.

        It would be better that createBackingStore returns PassOwnPtr instread of OwnPtr
        to keep compatibility with c++0x.

        * WebCoreSupport/ChromeClientGtk.cpp:
        (WebKit::createBackingStore):

2013-06-28  Iago Toral Quiroga  <itoral@igalia.com>

        Use gtk_widget_get_preferred_size instead of deprecated gtk_widget_get_requisition
        https://bugs.webkit.org/show_bug.cgi?id=118177

        Reviewed by Carlos Garcia Campos.

        * WebCoreSupport/ChromeClientGtk.cpp:
        (WebKit::ChromeClient::contentsSizeChanged):

2013-06-27  Iago Toral Quiroga  <itoral@igalia.com>

        Use consistent file names for WidgetBackingStoreGtkX11 class
        https://bugs.webkit.org/show_bug.cgi?id=118124

        Reviewed by Carlos Garcia Campos.

        * WebCoreSupport/ChromeClientGtk.cpp:

2013-06-21  Christophe Dumez  <ch.dumez@sisa.samsung.com>

        REGRESSION (r150663): Using webkitAudioContext in Inspector makes it undefined everywhere
        https://bugs.webkit.org/show_bug.cgi?id=117825

        Reviewed by Kentaro Hara.

        Use Settings to enable Web Audio instead of RuntimeEnabledFeatures.

        * webkit/webkitwebview.cpp:
        (webkit_web_view_update_settings):
        (webkit_web_view_settings_notify):

2013-06-18  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed. Update NEWS and Versions.m4 for 2.1.2 release.

        * NEWS: Added release notes for 2.1.2.

2013-06-17  Grzegorz Czajkowski  <g.czajkowski@samsung.com>

        Unreviewed, rolling out r151632.
        http://trac.webkit.org/changeset/151632
        https://bugs.webkit.org/show_bug.cgi?id=117585

        Debug build error ASSERT(WTF_USE_GRAMMAR_CHECKING) for non MAC
        platforms

        * webkit/webkitglobals.cpp:
        (webkit_context_menu_item_get_action):

2013-06-14  Grzegorz Czajkowski  <g.czajkowski@samsung.com>

        Context menu grammar checking items are available when GRAMMAR_CHECKING macro is off
        https://bugs.webkit.org/show_bug.cgi?id=117585

        Reviewed by Anders Carlsson.

        Add GRAMMAR_CHECKING guard to the context menu grammar items.

        * webkit/webkitglobals.cpp:
        (webkit_context_menu_item_get_action):

2013-06-12  Diego Pino Garcia  <dpino@igalia.com>

        [GTK] Parameter 'pseudoElement' from function 'webkit_dom_dom_window_get_computed_style' should be allowed to be NULL
        https://bugs.webkit.org/show_bug.cgi?id=117332

        Reviewed by Xan Lopez.

        Add test for function 'webkit_dom_dom_window_get_computed_style'.

        * tests/testdomdomwindow.c:
        (dom_dom_window_fixture_setup): Test setup for function
        'dom_dom_window_get_computed_style'.
        (dom_dom_window_fixture_teardown): Test teardown for function
        'dom_dom_window_get_computed_style'.
        (loadedCallback):
        (test_dom_dom_window_get_computed_style): Checks function
        'dom_dom_window_get_computed_style'.
        (main):

2013-06-10  Iago Toral Quiroga  <itoral@igalia.com>

        Use Cairo implementation of the WidgetBackingStore instead of X11 when running on Wayland
        https://bugs.webkit.org/show_bug.cgi?id=116717

        Reviewed by Martin Robinson.

        Decide which implementation of WidgetBackingStore to use (X11 or Cairo)
        depending on whether we are running on X11 or not. Select Cairo
        implementation when not running in X11.

        * WebCoreSupport/ChromeClientGtk.cpp:
        (WebKit::createBackingStore):
        (WebKit):
        (WebKit::ChromeClient::widgetSizeChanged):
        (WebKit::ChromeClient::attachRootGraphicsLayer):

2013-06-06  Diego Pino Garcia  <dpino@igalia.com>

        [GTK] Parameter 'refChild' from function 'webkit_dom_node_insert_before' should be allowed to be NULL
        https://bugs.webkit.org/show_bug.cgi?id=117303

        Reviewed by Xan Lopez.

        Add test for function 'webkit_dom_node_insert_before'.

        * tests/testdomnode.c: Checks function dom_document_node_insert_before
        (test_dom_node_insertion):

2013-06-06  Diego Pino Garcia  <dpino@igalia.com>

        [GTK] Parameters 'inResult' and 'resolver' from function 'webkit_dom_document_evaluate' should be allowed to be NULL
        https://bugs.webkit.org/show_bug.cgi?id=117129

        Reviewed by Xan Lopez.

        Add test for function 'webkit_dom_document_evaluate'.

        * tests/testdomdocument.c:
        (test_dom_document_evaluate): Checks function dom_document_evaluate,
        executes an XPath expression on a HTML document.
        (main): 

2013-06-05  Alberto Garcia  <agarcia@igalia.com>

        [GTK] AcceleratedCompositingContext: fix layerFlushTimerFiredCallback condition
        https://bugs.webkit.org/show_bug.cgi?id=117258

        Reviewed by Martin Robinson.

        The expressions were incorrectly grouped, a timeout handler can
        only be added only if there's none running already.

        * WebCoreSupport/AcceleratedCompositingContextGL.cpp:
        (WebKit::AcceleratedCompositingContext::renderLayersToWindow):

2013-06-04  Alberto Garcia  <agarcia@igalia.com>

        [GTK] Make precedence of logical operators explicit
        https://bugs.webkit.org/show_bug.cgi?id=117216

        Reviewed by Martin Robinson.

        There's a couple of cases where we mix && and || in the same
        expression. In ChromeClient::contentsSizeChanged() the lack of
        parentheses actually makes the expression wrong.

        * WebCoreSupport/AcceleratedCompositingContextGL.cpp:
        (WebKit::AcceleratedCompositingContext::renderLayersToWindow):
        * WebCoreSupport/ChromeClientGtk.cpp:
        (WebKit::ChromeClient::contentsSizeChanged):

2013-06-05  Enrique Ocana Gonzalez  <eocanha@igalia.com>

        [GTK] Fix pass_by_value coverity warning in ChromeClientGtk
        https://bugs.webkit.org/show_bug.cgi?id=117021

        Reviewed by Anders Carlsson.

        Pass dirtyRegion parameter in paintWebView() by reference to avoid object copying.

        * WebCoreSupport/ChromeClientGtk.cpp:
        (WebKit::paintWebView):

2013-05-29  Carlos Garcia Campos  <cgarcia@igalia.com>

        Unreviewed. Update NEWS and Versions.m4 for 2.1.1 release.

        * NEWS: Added release notes for 2.1.1.

2013-05-28  Andreas Kling  <akling@apple.com>

        Document::setFocusedNode() should be setFocusedElement().
        <http://webkit.org/b/116857>

        Reviewed by Antti Koivisto.

        * webkit/webkitwebview.cpp:
        (getFocusedNode):

2013-05-24  Christophe Dumez  <ch.dumez@sisa.samsung.com>

        Remove custom code for webkitAudioContext global constructor getter
        https://bugs.webkit.org/show_bug.cgi?id=116530

        Reviewed by Geoffrey Garen.

        Use RuntimeEnabledFeatures instead of Settings to toggle Web Audio support.

        * webkit/webkitwebview.cpp:
        (webkit_web_view_update_settings):
        (webkit_web_view_settings_notify):

2013-05-19  Anders Carlsson  <andersca@apple.com>

        Remove ChromeClient::webView()
        https://bugs.webkit.org/show_bug.cgi?id=116054

        Reviewed by Darin Adler.

        This blatantly horrible layer violation was only used to know if a ChromeClient is an empty
        client or not. We already have a (slightly less horrible) way to do that.

        * WebCoreSupport/ChromeClientGtk.h:
        (ChromeClient):

2013-05-18  Carlos Garcia Campos  <cgarcia@igalia.com>

        [GTK] Move GTK port off legacy clipboard
        https://bugs.webkit.org/show_bug.cgi?id=116221

        Reviewed by Martin Robinson.

        * WebCoreSupport/DragClientGtk.cpp:
        (WebKit::DragClient::startDrag): Get the DataObjectGtk from the
        Pasteboard associated to the given Clipboard.

2013-05-17  Gustavo Noronha Silva  <gustavo.noronha@collabora.com>

        Unreviewed build fix. Remove assertion that doesn't make sense anymore since the
        page does not give us access to the Chrome pointer directly anymore.

        * webkit/webkitwebview.cpp:
        (WebKit::kit):

2013-05-16  Andreas Kling  <akling@apple.com>

        Page::chrome() should return a reference.
        <http://webkit.org/b/116185>

        Reviewed by Anders Carlsson.

2013-05-16  Martin Robinson  <mrobinson@igalia.com>

        [GTK] Documentation for WEBKIT_DEBUG logging channels is out of date
        https://bugs.webkit.org/show_bug.cgi?id=114764

        Reviewed by Gustavo Noronha Silva.

        * docs/webkitenvironment.xml: Update documentation to reflect current list of
        logging channels.

2013-05-16  Allan Sandfeld Jensen  <allan.jensen@digia.com>

        [GTK] TargetFrame and innerNodeFrame confused
        https://bugs.webkit.org/show_bug.cgi?id=102907

        Reviewed by Martin Robinson.

        * webkit/webkithittestresult.cpp:
        (WebKit::kit):

2013-05-15  Anders Carlsson  <andersca@apple.com>

        Fix build.

        * webkit/webkitwebview.cpp:
        (webkitWebViewDirectionChanged):

2013-05-13  Anders Carlsson  <andersca@apple.com>

        Frame::editor() should return a reference
        https://bugs.webkit.org/show_bug.cgi?id=116037

        Reviewed by Darin Adler.

        * WebCoreSupport/ChromeClientGtk.cpp:
        (WebKit::ChromeClient::paint):
        * WebCoreSupport/DumpRenderTreeSupportGtk.cpp:
        (DumpRenderTreeSupportGtk::executeCoreCommandByName):
        (DumpRenderTreeSupportGtk::isCommandEnabled):
        * WebCoreSupport/EditorClientGtk.cpp:
        (WebKit::EditorClient::respondToChangedSelection):
        (WebKit::EditorClient::executePendingEditorCommands):
        (WebKit::EditorClient::handleKeyboardEvent):
        * WebCoreSupport/WebViewInputMethodFilter.cpp:
        (WebKit::WebViewInputMethodFilter::canEdit):
        (WebKit::WebViewInputMethodFilter::confirmCompositionText):
        (WebKit::WebViewInputMethodFilter::confirmCurrentComposition):
        (WebKit::WebViewInputMethodFilter::cancelCurrentComposition):
        (WebKit::WebViewInputMethodFilter::setPreedit):
        * webkit/webkitwebframe.cpp:
        (webkit_web_frame_replace_selection):
        * webkit/webkitwebview.cpp:
        (getLocationForKeyboardGeneratedContextMenu):
        (webkit_web_view_focus_in_event):
        (webkit_web_view_real_select_all):
        (webkit_web_view_real_cut_clipboard):
        (webkit_web_view_real_copy_clipboard):
        (webkit_web_view_real_undo):
        (webkit_web_view_real_redo):
        (webkit_web_view_real_paste_clipboard):
        (webkit_web_view_set_highlight_text_matches):
        (webkit_web_view_can_cut_clipboard):
        (webkit_web_view_can_copy_clipboard):
        (webkit_web_view_can_paste_clipboard):
        (webkit_web_view_delete_selection):
        (webkit_web_view_set_editable):
        (webkit_web_view_can_undo):
        (webkit_web_view_can_redo):

2013-05-14  Zan Dobersek  <zdobersek@igalia.com>

        [GTK] Move generated ColorData.cpp, WebKitFontFamilyNames.(cpp|h) build targets into libPlatform
        https://bugs.webkit.org/show_bug.cgi?id=115921

        Reviewed by Gustavo Noronha Silva.

        * GNUmakefile.am: Add platform_cppflags to the list of CPPFLAGS for libwebkit2gtk, libWebCoreGtk2,
        libPlatformGtk2 and WebKitPluginProcess.

2013-05-12  Timothy Hatcher  <timothy@apple.com>

        Add support for updating the Web Inspector toolbar height.

        https://bugs.webkit.org/show_bug.cgi?id=115996

        Reviewed by Joseph Pecoraro and Benjamin Poulain.

        * WebCoreSupport/InspectorClientGtk.cpp:
        (WebKit::InspectorFrontendClient::setToolbarHeight):
        * WebCoreSupport/InspectorClientGtk.h:

2013-05-12  Anders Carlsson  <andersca@apple.com>

        Stop including UnusedParam.h
        https://bugs.webkit.org/show_bug.cgi?id=116003

        Reviewed by Sam Weinig.

        UnusedParam.h is empty now so there's no need to include it anymore.

        * webkit/webkitapplicationcache.cpp:

2013-05-12  Carlos Garcia Campos  <cgarcia@igalia.com>

        [GTK] Remove unnecessary GTK_CHECK_VERSION #ifdefs
        https://bugs.webkit.org/show_bug.cgi?id=115914

        Reviewed by Martin Robinson.

        * WebCoreSupport/ChromeClientGtk.cpp:
        (WebKit::ChromeClient::contentsSizeChanged):
        * WebCoreSupport/FrameLoaderClientGtk.cpp:
        (WebKit::FrameLoaderClient::transitionToCommittedForNewPage):
        * tests/testapplicationcache.c:
        * tests/testatk.c:
        * tests/testatkroles.c:
        (main):
        * tests/testcontextmenu.c:
        * tests/testcopyandpaste.c:
        (main):
        * tests/testdomdocument.c:
        * tests/testdomdomwindow.c:
        * tests/testdomnode.c:
        * tests/testdownload.c:
        (main):
        * tests/testfavicondatabase.c:
        (main):
        * tests/testglobals.c:
        * tests/testhittestresult.c:
        * tests/testhttpbackend.c:
        (main):
        * tests/testkeyevents.c:
        (main):
        * tests/testloading.c:
        * tests/testmimehandling.c:
        (main):
        * tests/testnetworkrequest.c:
        (main):
        * tests/testnetworkresponse.c:
        (main):
        * tests/testwebbackforwardlist.c:
        (main):
        * tests/testwebdatasource.c:
        (main):
        * tests/testwebframe.c:
        (main):
        * tests/testwebhistoryitem.c:
        (main):
        * tests/testwebinspector.c:
        (main):
        * tests/testwebplugindatabase.c:
        (main):
        * tests/testwebresource.c:
        (main):
        * tests/testwebsettings.c:
        (main):
        * tests/testwebview.c:
        * tests/testwindow.c:
        (main):
        * webkit/webkitwebview.cpp:
        (webkit_web_view_realize):
        (webkit_web_view_show_help):
        (webkit_web_view_class_init):
        (webkit_web_view_set_tooltip_text):

2013-05-07  Tomas Popela  <tpopela@redhat.com>

        [GTK] Initialize WebKitWebPlugin path to prevent double-free
        https://bugs.webkit.org/show_bug.cgi?id=115624

        Reviewed by Carlos Garcia Campos.

        Use GOwnPtr for WebKitWebPlugin path to prevent double-free
        situations. Also use GOwnPtr for GError in webkit_web_plugin_get_path.

        * webkit/webkitwebplugin.cpp:
        (webkit_web_plugin_finalize):
        (webkit_web_plugin_get_path):
        * webkit/webkitwebpluginprivate.h:

2013-05-06  Zan Dobersek  <zdobersek@igalia.com>

        [GTK] Move GeolocationProviderGeoclue into libPlatform
        https://bugs.webkit.org/show_bug.cgi?id=115591

        Reviewed by Martin Robinson.

        * GNUmakefile.am: Add platform_webcore_cppflags to the list of libwebkitgtk's CPPFLAGS.

2013-05-02  Zan Dobersek  <zdobersek@igalia.com>

        Segmentation Fault with Romanian locale. Evolution not starting.
        https://bugs.webkit.org/show_bug.cgi?id=115484

        Reviewed by Darin Adler.

        Do not translate the property names that are being passed to the g_param_spec_boolean
        method - it is not required and is causing segfaults with various locales.

        * webkit/webkitviewportattributes.cpp:
        (webkit_viewport_attributes_class_init):

2013-04-30  Ed Bartosh  <bartosh@gmail.com>

        [GTK] --minimal build fails with error: class WebCore::EventHandler' has no member named 'dragSourceEndedAt
        https://bugs.webkit.org/show_bug.cgi?id=114299

        Reviewed by Martin Robinson.

        Wrapped code, related to drag&drop in #if ENABLE(DRAG_SUPPORT)

        * webkit/webkitwebview.cpp:
        (webkit_web_view_class_init):
        (webkit_web_view_init):

2013-04-25  Joseph Pecoraro  <pecoraro@apple.com>

        Web Inspector: ConsoleMessage should include line and column number where possible
        https://bugs.webkit.org/show_bug.cgi?id=114929

        Reviewed by Timothy Hatcher.

        * WebCoreSupport/ChromeClientGtk.cpp:
        (WebKit::ChromeClient::addMessageToConsole):
        * WebCoreSupport/ChromeClientGtk.h:
        (ChromeClient):

2013-04-22  Martin Robinson  <mrobinson@igalia.com>

        Try to fix the build after enabling gobject-introspection

        * GNUmakefile.am: Disable --warn-error for WebKit1 until we can work out all gir failures.
        * webkit/webkitwebplugin.cpp: Skip this API for introspection because it return a GSList
        of pointer (non-boxed) types.

2013-04-22  Martin Robinson  <mrobinson@igalia.com>

        [GTK] Enable introspection always for developer builds
        https://bugs.webkit.org/show_bug.cgi?id=114983

        Reviewed by Gustavo Noronha Silva.

        * GNUmakefile.am: Make warnings during gir scanning cause the build to fail. Eliminate
        warnings about deprecated API that the g-ir-scanner uses when generating
        the scanner program. Use --quiet to avoid printing lots of output to
        non-verbose builds.

2013-04-22  Martin Robinson  <mrobinson@igalia.com>

        [GTK] Fix remaining introspection warnings
        https://bugs.webkit.org/show_bug.cgi?id=114980

        Reviewed by Gustavo Noronha Silva.

        * webkit/webkitspellchecker.h:
        (_WebKitSpellCheckerInterface): Align the name of the check_spelling_of_string virtual
        method with the concrete method to avoid a g-ir-scanner warning.
        * webkit/webkitversion.h.in: Skip WEBKITGTK_API_VERSION for introspection because it
        doesn't follow the appropriate namespace name.

2013-04-22  Zan Dobersek  <zdobersek@igalia.com>

        [GTK] Set up libPlatform.la
        https://bugs.webkit.org/show_bug.cgi?id=114168

        Reviewed by Martin Robinson.

        * GNUmakefile.am: Add the new libPlatform.la library to the libwebkitgtk library.

2013-04-19  Martin Robinson  <mrobinson@igalia.com>

        [GTK] JSCore.gir.in has a few problems
        https://bugs.webkit.org/show_bug.cgi?id=114710

        Reviewed by Philippe Normand.

        * GNUmakefile.am: Updated to reflect new name and location of JavaScriptCore-x.0.gir.
        * JSCore.gir.in: Removed.

2013-04-17  Geoffrey Garen  <ggaren@apple.com>

        Renamed JSGlobalData to VM
        https://bugs.webkit.org/show_bug.cgi?id=114777

        Reviewed by Phil Pizlo.

        * WebCoreSupport/DumpRenderTreeSupportGtk.cpp:
        (DumpRenderTreeSupportGtk::gcCountJavascriptObjects):

2013-04-16  Anders Carlsson  <andersca@apple.com>

        Fix speling error.

        * WebCoreSupport/WebViewInputMethodFilter.cpp:

2013-04-16  Ryosuke Niwa  <rniwa@webkit.org>

        Another GTK+ build fix.

        * WebCoreSupport/WebViewInputMethodFilter.cpp:

2013-04-16  Ryosuke Niwa  <rniwa@webkit.org>

        GTK+ build fix attempt.

        * WebCoreSupport/DumpRenderTreeSupportGtk.cpp:
        * WebCoreSupport/WebViewInputMethodFilter.cpp:
        * webkit/webkitwebframe.cpp:

2013-04-14  Andreas Kling  <akling@apple.com>

        Move CSSOM classes to using MutableStylePropertySet over StylePropertySet.
        <http://webkit.org/b/114581>

        Reviewed by Anders Carlsson.

        * WebCoreSupport/EditorClientGtk.cpp:
        (WebKit::EditorClient::shouldApplyStyle):

2013-04-12  Carlos Garcia Campos  <cgarcia@igalia.com>

        [GTK] Split GtkAuthenticationDialog in two widgets
        https://bugs.webkit.org/show_bug.cgi?id=103644

        Reviewed by Xan Lopez.

        * GNUmakefile.am: Add new files to compilation.
        * WebCoreSupport/FrameLoaderClientGtk.cpp:
        (WebKit::FrameLoaderClient::dispatchDidReceiveAuthenticationChallenge):
        Use helper createAuthenticationDialog() to create and show the
        auth dialog.
        * webkit/webkitauthenticationdialog.cpp: Added.
        (authenticationDialogResponseCallback):
        (createAuthenticationDialog):
        * webkit/webkitauthenticationdialog.h: Added.
        * webkit/webkitsoupauthdialog.cpp:
        (sessionAuthenticate): Ditto.

2013-04-10  Benjamin Poulain  <bpoulain@apple.com>

        Mass remove all the empty directories

        Rubberstamped by Ryosuke Niwa.

        * gyp: Removed.
        * po: Removed.

2013-04-10  Anton Obzhirov  <a.obzhirov@samsung.com>

        [GTK] Add support for Page Visibility
        https://bugs.webkit.org/show_bug.cgi?id=97324

        Reviewed by Sam Weinig.

        Implemented access to page visibility API for GTK test runner.

        * WebCoreSupport/DumpRenderTreeSupportGtk.cpp:
        (DumpRenderTreeSupportGtk::setPageVisibility):
        * WebCoreSupport/DumpRenderTreeSupportGtk.h:

2013-04-08  Carlos Garcia Campos  <cgarcia@igalia.com>

        [GTK] DOM objects created wrapping a base class have incorrect GObject type
        https://bugs.webkit.org/show_bug.cgi?id=113132

        Reviewed by Gustavo Noronha Silva.

        Remove WebKitDOMBindindg.h include from several files because it's
        been renamed and it was not actually needed.

        * WebCoreSupport/ChromeClientGtk.cpp:
        * WebCoreSupport/EditorClientGtk.cpp:
        * webkit/webkithittestresult.cpp:

2013-04-04  Martin Robinson  <mrobinson@igalia.com>

        [GTK] Remove the gyp build
        https://bugs.webkit.org/show_bug.cgi?id=113942

        Reviewed by Gustavo Noronha Silva.

        * gyp/Configuration.gypi.in: Removed.
        * gyp/Dependencies.gyp: Removed.
        * gyp/GNUmakefile: Removed.
        * gyp/autogen.sh: Removed.
        * gyp/configure.ac: Removed.
        * gyp/run-gyp: Removed.

2013-04-04  Christophe Dumez  <ch.dumez@sisa.samsung.com>

        [Cairo] Fix canvas drawing of SVG-based patterns and remove NativeImageCairo
        https://bugs.webkit.org/show_bug.cgi?id=113929

        Reviewed by Martin Robinson.

        Update code now that PassNativeImagePtr is now a typedef to PassRefPtr<cairo_surface_t>
        instead of NativeImageCairo*.

        * webkit/webkitfavicondatabase.cpp:
        (getIconPixbufSynchronously):

2013-04-03  Alban Crequy  <alban.crequy@collabora.co.uk>

        [GTK] WebKitWebNavigationAction: fix mix between dispose and finalize
        https://bugs.webkit.org/show_bug.cgi?id=113794

        Reviewed by Gustavo Noronha Silva.

        WebKitWebNavigationAction's dispose function was named finalize and was calling
        the parent class's finalise function, causing a memory corruption. Change it to
        be a proper finalize function instead.

        * webkit/webkitwebnavigationaction.cpp:
        (webkit_web_navigation_action_class_init):

2013-03-28  Zan Dobersek  <zdobersek@igalia.com>

        [GTK] Build GTK-specific, non-layer-violating source code into WebCore-independent libPlatformGtk.la
        https://bugs.webkit.org/show_bug.cgi?id=112546

        Reviewed by Martin Robinson.

        * GNUmakefile.am: The GtkVersioning.c file has moved back under Source/WebCore/platform.

2013-03-26  Martin Robinson  <mrobinson@igalia.com>

        [GTK] [gyp] Improve support for rerunning gyp automatically
        https://bugs.webkit.org/show_bug.cgi?id=113360

        Reviewed by Gustavo Noronha Silva.

        Add support for automatically rerunning gyp when input file changes are detected
        while running make.

        * gyp/GNUmakefile: Added. A wrapper that invokes the generated makefile.
        * gyp/autogen.sh: Add a symlink to the wrapper script.
        * gyp/configure.ac: "Freeze" the TOPLEVEL_DIRECTORY command-line argument so that
        run-gyp reads it properly when configure is run independently of autogen.sh.
        * gyp/run-gyp: Prevent generation of auto-regeneration rules in gyp. They are buggy.

2013-03-27  Timothy Hatcher  <timothy@apple.com>

        Add support for dock-to-right of the Web Inspector in the Mac port.

        Unfortunately this requires Safari changes, so it is disabled in the nightly builds.

        https://webkit.org/b/113341
        rdar://problem/10368152

        Reviewed by Joseph Pecoraro.

        * WebCoreSupport/InspectorClientGtk.cpp:
        (WebKit::InspectorFrontendClient::attachWindow):
        (WebKit::InspectorFrontendClient::setAttachedWindowWidth):
        * WebCoreSupport/InspectorClientGtk.h:
        (InspectorFrontendClient):

2013-03-26  Hayato Ito  <hayato@chromium.org>

        Allow ShadowContents in HitTests by default.
        https://bugs.webkit.org/show_bug.cgi?id=113171

        Reviewed by Dimitri Glazkov.

        * webkit/webkitwebinspector.cpp:
        (webkit_web_inspector_inspect_coordinates):
        * webkit/webkitwebview.cpp:
        (prepareMouseEventForFrame):
        (webkit_web_view_get_hit_test_result):

2013-03-26  Tony Chang  <tony@chromium.org>

        Autogenerate the scrollAnimatorEnabled setting in Settings.in
        https://bugs.webkit.org/show_bug.cgi?id=113253

        Reviewed by James Robinson.

        * webkit/webkitwebview.cpp:
        (webkit_web_view_update_settings): Update call to WebCore to use setScrollAnimatorEnabled(bool).
        (webkit_web_view_settings_notify): Update call to WebCore to use setScrollAnimatorEnabled(bool).

2013-03-23  Carlos Garcia Campos  <cgarcia@igalia.com>

        [GTK][Regression] webkit_dom_html_table_element_insert_row returns value that doesn't pass WEBKIT_DOM_IS_HTML_TABLE_ROW_ELEMENT macro
        https://bugs.webkit.org/show_bug.cgi?id=111714

        Reviewed by Martin Robinson.

        Add test that checks webkit_dom_html_table_element_insert_row() to
        also preproduce this issue.

        * tests/testdomdocument.c:
        (test_dom_document_insert_row):
        (main):

2013-03-22  Gustavo Noronha Silva  <gns@gnome.org>

        Trivial fixes to the gyp-build autogen.sh script.

        Reviewed by Martin Robinson (mrobinson).

        * gyp/autogen.sh: add /bin/sh -e as hashbang, so stricter shells will be happy to
        run the script; deal with automake exiting with an error code because there is no
        Makefile.am for it to work on.

2013-03-19  Martin Robinson  <mrobinson@igalia.com>

        [GTK] Add support for building the WebCore bindings to the gyp build
        https://bugs.webkit.org/show_bug.cgi?id=112638

        Reviewed by Nico Weber.

        * gyp/Configuration.gypi.in: Added options for enabling SVG and setting the location of
        the WebCore derived sources.
        * gyp/run-gyp: Include the gyp scripts directory on the Python path and make the WebCoreGTK
        gyp file the default for the build.

2013-03-22  Martin Robinson  <mrobinson@igalia.com>

        [GTK] [gyp] Expose a few more compiler defines for the gyp build
        https://bugs.webkit.org/show_bug.cgi?id=113109

        Reviewed by Gustavo Noronha Silva.

        * gyp/Configuration.gypi.in: Expose the version number string and data
        directory to the gyp build as command-line arguments.

2013-03-22  Martin Robinson  <mrobinson@igalia.com>

        [GTK] [gyp] Feature defines are not space separated
        https://bugs.webkit.org/show_bug.cgi?id=113108

        Reviewed by Gustavo Noronha Silva.

        * gyp/configure.ac: Properly export feature defines for gyp during
        configure phase.

2013-03-22  Mario Sanchez Prada  <mario.prada@samsung.com>

        [GTK] Include the right GL header for GLES2
        https://bugs.webkit.org/show_bug.cgi?id=113034

        Reviewed by Martin Robinson.

        Include GLES2/gl2.h when using GLES2.

        * WebCoreSupport/AcceleratedCompositingContextGL.cpp:

2013-03-20  Zan Dobersek  <zdobersek@igalia.com>

        [GTK] Build ANGLE sources into a separate library from libWebCore.la
        https://bugs.webkit.org/show_bug.cgi?id=112778

        Reviewed by Martin Robinson.

        * GNUmakefile.am: Add libLevelDB.la to the libwebkitgtk library if using the OpenGL accelerated backend.

2013-03-17  Gustavo Noronha Silva  <gns@gnome.org>

        [GTK] Fix and improve dist hooks for translations
        https://bugs.webkit.org/show_bug.cgi?id=112519

        Reviewed by Carlos Garcia Campos.

        * GNUmakefile.am: removed left-over translation files from EXTRA_DIST

2013-03-15  Nate Chapin  <japhet@chromium.org>

        Hide MainResourceLoader from the outside world
        https://bugs.webkit.org/show_bug.cgi?id=109971

        Reviewed by Adam Barth.

        * WebCoreSupport/FrameLoaderClientGtk.cpp:
        (WebKit::FrameLoaderClient::convertMainResourceLoadToDownload):
        * WebCoreSupport/FrameLoaderClientGtk.h:
        (FrameLoaderClient):

2013-03-15  Abhishek Arya  <inferno@chromium.org>

        Replace static_casts with to* helper functions.
        https://bugs.webkit.org/show_bug.cgi?id=112401

        Reviewed by Stephen Chenney.

        to* helper functions are preferred over static_cast calls since they
        help to catch bad casts easily on the testing infrastructure.

        * WebCoreSupport/FrameLoaderClientGtk.cpp:
        (WebKit::FrameLoaderClient::redirectDataToPlugin):

2013-03-14  Manuel Rego Casasnovas  <rego@igalia.com>

        Add selectTrailingWhitespaceEnabled setting to WebCore::Page
        https://bugs.webkit.org/show_bug.cgi?id=109404

        Reviewed by Tony Chang.

        Use new settings for smartInsertDeleteEnabled and
        selectTrailingWhitespaceEnabled.

        Remove code related to DRT as it is not needed anymore.

        * WebCoreSupport/DumpRenderTreeSupportGtk.cpp:
        * WebCoreSupport/DumpRenderTreeSupportGtk.h:
        (DumpRenderTreeSupportGtk):
        * WebCoreSupport/EditorClientGtk.cpp:
        (WebKit::EditorClient::smartInsertDeleteEnabled):
        (WebKit::EditorClient::isSelectTrailingWhitespaceEnabled):
        (WebKit::EditorClient::EditorClient):
        * WebCoreSupport/EditorClientGtk.h:
        (EditorClient):

2013-03-14  Abhishek Arya  <inferno@chromium.org>

        Replace static_casts with to* helper functions.
        https://bugs.webkit.org/show_bug.cgi?id=112296

        Reviewed by Kentaro Hara.

        to* helper functions are preferred over static_cast calls since they
        help to catch bad casts easily on the testing infrastructure.

        * webkit/webkitwebview.cpp:
        (webkit_web_view_query_tooltip):

2013-03-13  Tomas Popela  <tpopela@redhat.com>

        [GTK][Introspection] Fix of gtk doc annotation warnings
        https://bugs.webkit.org/show_bug.cgi?id=109182

        Reviewed by Martin Robinson.

        Fixed some gtk doc annotation warnings that appears during
        compiling. Also some white characters were removed and some restyling
        was done - all the g_signal_new in webkit directory have now the same
        style. 


        * webkit/webkitdownload.cpp:
        (webkit_download_class_init):
        * webkit/webkitfavicondatabase.cpp:
        (webkit_favicon_database_class_init):
        * webkit/webkitgeolocationpolicydecision.cpp:
        * webkit/webkitglobals.cpp:
        * webkit/webkithittestresult.h:
        * webkit/webkiticondatabase.cpp:
        (webkit_icon_database_class_init):
        * webkit/webkitsecurityorigin.cpp:
        * webkit/webkitsecurityorigin.h:
        * webkit/webkitsoupauthdialog.cpp:
        * webkit/webkitspellchecker.cpp:
        * webkit/webkitviewportattributes.cpp:
        (webkit_viewport_attributes_class_init):
        * webkit/webkitwebdatabase.cpp:
        * webkit/webkitwebframe.cpp:
        (webkit_web_frame_class_init):
        * webkit/webkitwebframe.h:
        * webkit/webkitwebinspector.cpp:
        (webkit_web_inspector_class_init):
        * webkit/webkitwebnavigationaction.cpp:
        (webkit_web_navigation_action_class_init):
        * webkit/webkitwebplugindatabase.cpp:
        * webkit/webkitwebpolicydecision.cpp:
        * webkit/webkitwebresource.cpp:
        (webkit_web_resource_class_init):
        * webkit/webkitwebsettings.cpp:
        (webkit_web_settings_class_init):
        * webkit/webkitwebview.cpp:
        (webkit_web_view_class_init):
        (webkit_web_view_apply_zoom_level):
        * webkit/webkitwebwindowfeatures.cpp:
        (webkit_web_window_features_equal):

2013-03-13  Pavel Feldman  <pfeldman@chromium.org>

        Web Inspector: get rid of hiddenPanels filter
        https://bugs.webkit.org/show_bug.cgi?id=112252

        Reviewed by Vsevolod Vlasov.

        * WebCoreSupport/InspectorClientGtk.cpp:
        * WebCoreSupport/InspectorClientGtk.h:
        (InspectorFrontendClient):

2013-03-12  Zan Dobersek  <zdobersek@igalia.com>

        [GTK] Set up the libPlatformGtk.la library
        https://bugs.webkit.org/show_bug.cgi?id=111738

        Reviewed by Martin Robinson.

        * GNUmakefile.am: Reference platformgtk_cppflags variable, libPlatformGtk.la along with webcoregtk_cppflags variable, libWebCoreGtk.la.
        Adjust the path to GtkVersioning.c, the file has moved under Source/Platform.

2013-03-07  Zan Dobersek  <zdobersek@igalia.com>

        [GTK] Limit the supported compilers to GCC >= 4.7 and Clang >= 3.0
        https://bugs.webkit.org/show_bug.cgi?id=109932

        Reviewed by Martin Robinson.

        * GNUmakefile.am: Replace references to SYMBOL_VISIBILITY_INLINES and SYMBOL_VISIBILITY variables with the actual flags.
        They are now available by default due to the limited set of supported compilers.

2013-03-06  Gustavo Noronha Silva  <gns@gnome.org>

        [GTK] Enable translations for WebKit2
        https://bugs.webkit.org/show_bug.cgi?id=111398

        Reviewed by Martin Robinson.

        * GNUmakefile.am: no longer distribute po files from here, they've moved to
        Sources/WebCore/platform/gtk.

2013-03-07  Tomas Popela  <tpopela@redhat.com>

        [GTK] Expose "ShouldRespectImageOrientation" setting into WebKitWebSettings
        https://bugs.webkit.org/show_bug.cgi?id=111414

        Reviewed by Carlos Garcia Campos.

        We should expose ShouldRespectImageOrientation setting into
        WebKitWebSettings. When it is enabled, the images are shown with right
        orientation regarding to images EXIF data.

        * webkit/webkitwebsettings.cpp:
        (webkit_web_settings_class_init):
        (webkit_web_settings_set_property):
        (webkit_web_settings_get_property):
        * webkit/webkitwebsettingsprivate.h:
        * webkit/webkitwebview.cpp:
        (webkit_web_view_update_settings):
        (webkit_web_view_settings_notify):

2013-03-06  Benjamin Poulain  <benjamin@webkit.org>

        WebKitTestRunner needs layoutTestController.elementDoesAutoCompleteForElementWithId
        https://bugs.webkit.org/show_bug.cgi?id=42696

        Reviewed by Andreas Kling.

        * WebCoreSupport/DumpRenderTreeSupportGtk.cpp:
        * WebCoreSupport/DumpRenderTreeSupportGtk.h:
        (DumpRenderTreeSupportGtk):

2013-03-06  Sudarsana Nagineni  <sudarsana.nagineni@intel.com>

        [GTK] Return m_inspectorFilesPath if it is not null
        https://bugs.webkit.org/show_bug.cgi?id=111633

        Reviewed by Martin Robinson.

        Added missing return in InspectorClient::inspectorFilesPath().

        * WebCoreSupport/InspectorClientGtk.cpp:
        (WebKit::InspectorClient::inspectorFilesPath):

2013-03-06  Dominique Leuenberger  <dimstar@opensuse.org>

        Link the webkit_tests to XRENDER_LIBS.
        This solves the linking failure when building against gtk2 like:
        usr/lib/gcc/i586-suse-linux/4.7/../../../../i586-suse-linux/bin/ld:
        Source/WebCore/platform/gtk/Programs_unittests_testcopyandpaste-GtkVersioning.o:
        undefined reference to symbol 'XFree'
        /usr/lib/gcc/i586-suse-linux/4.7/../../../../i586-suse-linux/bin/ld:
        note: 'XFree' is defined in DSO /usr/lib/libX11.so.6 so try adding it
        to the linker command line
        /usr/lib/libX11.so.6: could not read symbols: Invalid operation

        https://bugs.webkit.org/show_bug.cgi?id=111572

        Reviewed by Gustavo Noronha Silva.

        * GNUmakefile.am:

2013-03-03  Adam Barth  <abarth@webkit.org>

        Unreviewed rollout of http://trac.webkit.org/r144530
        As described in https://bugs.webkit.org/show_bug.cgi?id=111167 and
        https://bugs.webkit.org/show_bug.cgi?id=111035, this patch caused a
        large number of ASSERTs in chromium-win.

        * webkit/webkitwebpolicydecision.cpp:

2013-03-02  Benjamin Poulain  <bpoulain@apple.com>

        Move computedStyleIncludingVisitedInfo from TestRunner to Internals
        https://bugs.webkit.org/show_bug.cgi?id=109772

        Reviewed by Andreas Kling.

        * WebCoreSupport/DumpRenderTreeSupportGtk.cpp:
        * WebCoreSupport/DumpRenderTreeSupportGtk.h:
        (DumpRenderTreeSupportGtk):

2013-02-28  Alexey Proskuryakov  <ap@apple.com>

        Reduce amount of rebuilding when touching networking headers
        https://bugs.webkit.org/show_bug.cgi?id=111035

        Reviewed by Eric Seidel.

        Adding includes that are now necessary because WebCore headers don't have them
        any more.

        * webkit/webkitwebpolicydecision.cpp:

